# 标准构件库

为了更好的优化芯建建筑模型，将芯建建筑的结构、物理属性、财务等相关信息更好的数据化，参数化，减小模型尺寸，最大程度的共用模型，我们采用以下方式来构建。

## Standard Components 标准构件

使用标准构件库，可最大程度共用一个模型，并且可附带Meta数据用于计算，Meta信息为JSON, 可以描述该构件的物理属性、财务等信息。

以下为示例：

|ID|命名|模型|
|-|-|-|-|
| 1 | 芯板A | 1m x 1m x 1m 正方体 |
| 2 | 芯板P | 1m x 1m x 1m 正方体 |
| 3 | 芯板Q | 1m x 1m x 1m 正方体 |
| 4 | 芯板B | 1m x 1m x 1m 正方体 |
| 5 | 芯板D | 1m x 1m x 1m 正方体 |
| 6 | 芯板H | 1m x 1m x 1m 正方体 |
| 7 | 口型杆 | 1m x 1m x 1m 口型杆 |
| 8 | 门型杆 | 1m x 1m x 1m 门型杆 |
| 9 | 方杆 | 1m x 1m x 1m 方杆 |
| 10 | 01型门 | 01型门 |
|....|||
| 20 | LT连接件 | LT连接件 |
|....|||
| 30 | 01型水龙头 | 01型水龙头 |
| 31 | 02型水龙头 | 02型水龙头 |
| 32 | 01型洗脸池 | 01型洗脸池 |
|....|||
| 40 | A型病床 | A型病床 |
| 41 | B型病床 | B型病床 |
| 42 | 01型床头柜| 01型床头柜 |

注意：

* 标准构件库可不断扩展来适应构建模块的需求
* 标准构件在Unity里可以是Prefab或者FBX, OBJ等3D文件文件。
* 标准构件在MongoDB里只记录ID, 名称，模型名，类型

---

## Modules 建筑模块

可以通过标准构件库来构件模块(Module)

通过使用 [Standard Components 标准构件] 来构建的芯建的建筑模块，比如：2床病房、3床病房、4室2厅住宅、CB22-8或CB30-12，

### 1. Unity说明
模块保存成Prefab.

通过堆叠模块可构成建筑（Building）。

Prefab里包含了模块的结构信息、所有标准构件尺寸、模块动画。

Prefab里包含模块动画，使用Animator组件实现，有3种Stats:

1.  Static - 展示模块已经建好的样子
2.  Construction - 施工动画
3.  Decoration - 室内装饰、家具等动画(可选)

### 2. MongoDB 数据结构说明

数据库里保存了每个模块的ID，标准构件尺寸，Meta数据，可以计算META信息，比如：重量、强度、成本等。

```
{
    name: "2床病房",
    meta:{
        beds: 2,
        ...
    },
    components:[{
        model: "芯板B",
        transform:{ 
            position:{
                x:1.00,
                y:0,
                z:-20
            },
            rotation:{
                x:0,
                y:0,
                z:0
            },
            scale:{
                x: 12,
                y: 2,
                z: 0.15
            }
        },
        meta:{
            weight: 12,
            ...
            ...
        }
    },
    {
        model: "门型杆",
        transform:{ 
            position:{
                x:1.00,
                y:0,
                z:-20
            },
            rotation:{
                x:0,
                y:0,
                z:0
            },
            scale:{
                x: 1,
                y: 1,
                z: 5
            }
        },
        meta:{
            weight: 12,
            ...
            ...
        }
    }]
}
```

#### 数据说明：
```
name          - 模块名
mata          - 该模块的Meta信息
components    - 数组，包含了构建此模块的所有标准构件, 包括
    component - 使用的标准构件名
    transform - 描述该标准构建的变换，包括位置(Position)，旋转(Rotation)，大小(Scale)。
    meta      - 该构件的Meta信息，如物理信息，成本信息等
```

## Building 建筑

（TODO: 需要提供每项的计算表达式。）

1. 楼（通过模块数和META计算）
    * 单层面积
    * 层数
    * 大小
    * 建筑面积
    * 模块数
    * 电梯数
    * 等等

2. 功能（通过Meta计算）
    * 病房数
    * 负压参数
    * 等等

3. 特性（通过Meta计算）
    * 抗地震
    * 外墙保温
    * 等等

## Block 地块

（TODO: 需要提供每项的计算表达式和参考资料。）

1. GIS
2. 预警数据
3. 地价
4. 等等